{% extends 'base.html'%}
{%load static%}
{% load store_tags %}
{% load jformat %}
  {%block content%}
        </header>
        <main class="container child:mt-8">
            <section>
                <ul class="flex items-center gap-x-2 text-gray-400 text-sm lg:text-base">
                    <li class="flex items-center gap-x-2">
                        <a href="https://caffeine-demo.ir/index.html">صفحه اصلی</a> <svg class="w-4 h-4"><use href="#chevron-left"></use></svg>
                    </li>
                    <li class="flex items-center gap-x-2">
                        <a href="https://caffeine-demo.ir/index.html">فروشگاه</a> <svg class="w-4 h-4"><use href="#chevron-left"></use></svg>
                    </li>
                    <li class="flex items-center gap-x-2"><a href="https://caffeine-demo.ir/shop.html">جزییات محصول</a></li>
                </ul>
            </section>
            <section class="flex flex-col lg:flex-row items-start gap-4 child:rounded-lg child:bg-white child:dark:bg-zinc-700 child:shadow child:p-4">
                <div class="w-full lg:w-3/4 flex flex-col gap-y-8">
                    <div class="flex flex-col lg:flex-row gap-5">
                        <div class="flex lg:w-96 flex-col gap-y-4">
                            
                            <div class="swiper mt-2 w-full porduct-details-slider rounded-lg swiper-initialized swiper-horizontal swiper-rtl swiper-backface-hidden">
                                <div class="swiper-wrapper" id="swiper-wrapper-5e3099da610accdff" aria-live="polite">
                                    <div class="swiper-slide swiper-slide-active" role="group" aria-label="1 / 4" style="width: 366px; margin-left: 20px;">
                                        <img src="{{prod.image.url }}" class="rounded-lg shadow w-full object-cover lg:w-96 lg:h-fit" alt="" />
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                        <div class="flex flex-col gap-y-4 w-full">
                            <div class="flex items-start justify-between border-b border-b-gray-200 py-2">
                                <div class="flex flex-col gap-y-1">
                                    <p class="text-sm text-gray-400">{{prod.title_english}}</p>
                                    <h3 class="text-2xl font-MorabbaMedium">
                                    {{prod.title_persian}}
                                    </h3>
                                </div>
                                <div class="flex gap-x-1">
                                    <p class="font-DanaMedium mt-0.5">5.0</p>
                                    <svg class="w-5 h-5 text-yellow-400"><use href="#star"></use></svg>
                                </div>
                            </div>
                            <div class="flex gap-x-1 text-gray-400">
                                <svg class="w-5 h-5"><use href="#list-bullet"></use></svg>
                                <p>دسته‌بندی : 
                                    {%for cat in post.category.all%}
                                        {{cat.name}}
                                    {%endfor%}
                             </p>
                            </div>
                            <p class="mt-2 font-DanaMedium">ویژگی های محصول :</p>
                            <div class="grid grid-cols-12 gap-4 child:col-span-12 xl:child:col-span-6 child:dark:bg-zinc-800 child:bg-gray-100 child:h-12 child:rounded-lg child:text-sm child:flex child:items-center child:justify-center">
                                <div>
                                    <p class="text-zinc-600 dark:text-gray-400">میزان قهوه : 
                                    {{prod.get_caffein_level_display_name}}

                                    </p>
                                </div>

                                <div>
                                    <p class="text-zinc-600 dark:text-gray-400">
                                        ترکیبات:
                                        {{prod.mixed_type}}
                                    </p>
                                </div>
                                <div>
                                    <p class="text-zinc-600 dark:text-gray-400">گونه : 
                                        {{prod.material}}

                                    </p></div>
                                <div>
                                    <p class="text-zinc-600 dark:text-gray-400">وزن : 
                                            {{prod.weight}}
                                            گرم
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div
                        class="lg:mr-2 grid grid-cols-12 child:col-span-6 xl:child:col-span-3 gap-x-1 gap-y-2 lg:gap-4 child:border child:text-gray-400 child:dark:border-white/20 child:border-gray-200 child:rounded-lg child:h-12 child:p-2 child:flex child:items-center child:gap-x-1 lg:child:gap-x-2 child:text-sm lg:text-base"
                    >
                        <span>
                            <svg class="w-4 h-4 lg:w-6 lg:h-6"><use href="#arrow-path-rounded-square"></use></svg>
                            <p>ضمانت بازگشت کالا</p>
                        </span>
                        <span>
                            <svg class="w-4 h-4 lg:w-6 lg:h-6"><use href="#check-badge"></use></svg>
                            <p>تضمین اصالت کالا</p>
                        </span>
                        <span>
                            <svg class="w-4 h-4 lg:w-6 lg:h-6"><use href="#calender-day"></use></svg>
                            <p>پشتیبانی کل هفته</p>
                        </span>
                        <span>
                            <svg class="w-4 h-4 lg:w-6 lg:h-6"><use href="#truke"></use></svg>
                            <p>ارسال به سراسر ایران</p>
                        </span>
                    </div>
                    <div class="lg:mr-2">
                        <h2 class="font-MorabbaMedium text-2xl pb-1 mb-2">معرفی محصول</h2>
                        <p class=".font-Dana leading-10 text-gray-600 dark:text-gray-300">
                            {{prod.content|safe}}
                        </p>
                    </div>
                </div>
                <form class="w-full lg:w-1/4 lg:sticky top-5 flex flex-col gap-y-6" method="post" 
                action="{% url 'store:product_detail' prod.id %}">
                    {% csrf_token %}
                    <div class="flex items-center gap-x-1">
                        <p class="text-2xl font-DanaDemiBold">
                            {{prod.price}}
                        </p>
                        <p class="">تومان</p>
                    </div>
                    <div class="w-full flex items-center justify-between gap-x-1 rounded-lg border border-gray-200 dark:border-white/20 py-2 px-3">
                            <img class="w-6 h-6 increment" src="{% static 'images/plus-svgrepo-com.svg'%}">
                            <input type="number" name="quantity" id="customInput" min="1" max="20" value="1" class="custom-input mr-4 text-lg bg-transparent" />
                            
                            <img class="w-6 h-6 decrement" src="{% static 'images/minus-svgrepo-com.svg'%}">
                    </div>
                    <div class="w-full flex items-center gap-x-1 justify-between dark:bg-zinc-800 dark:text-gray-400 bg-gray-100 transition-all rounded-lg py-2 px-2 xl:px-3 font-DanaMedium text-sm xl:text-base">
                        <p>مجموع خرید :</p>
                        <p>
                            <span id="total-buying">{{prod.price}}</span>
                            تومان
                        </p>

                    </div>
                    {% if prod.count_number%}
                        <button type="submit" class="w-full flex items-center gap-x-1 justify-center bg-green-500 text-white hover:bg-green-600 transition-all rounded-lg shadow py-2">
                            افزودن به سبد خرید <svg class="w-5 h-5"><use href="#shopping-bag"></use></svg>
                        </button>
                    {%else%}
                        <button disabled type="submit" class="w-full flex items-center gap-x-1 justify-center bg-red-500 text-white hover:bg-red-400 transition-all rounded-lg shadow py-2">
                            ناموجود 
                        </button>
                    {%endif%}                    
                    <div class="text-sm text-gray-400 flex xl:items-center gap-x-1">
                        <svg class="w-5 h-5"><use href="#info"></use></svg>
                        <p>ارسال رایگان برای خریدهای بالای 400 هزار تومان</p>                     
                        
                    </div>
                </div>
            </section>
            
            <section class="mt-10">
                <div class="flex items-center justify-between mb-12">
                    <div class="flex flex-col gap-y-2"><h2 class="font-MorabbaMedium text-xl lg:text-3xl">محصولات مرتبط</h2></div>
                    <div class="flex items-center gap-x-2 child:p-2 child:bg-white child:dark:bg-zinc-700 child:shadow child:rounded-full">
                        <button class="prev-slide">
                            <svg class="w-4 h-4"><use href="#chevron-right"></use></svg>
                        </button>
                        <button class="next-slide">
                            <svg class="w-4 h-4"><use href="#chevron-left"></use></svg>
                        </button>
                    </div>
                </div>
                <div class="swiper BestSelling rounded-lg swiper-initialized swiper-horizontal swiper-rtl swiper-backface-hidden" dir="rtl">
                    <div
                        class="swiper-wrapper rounded-lg mb-2 child:cursor-pointer child:overflow-hidden child:rounded-lg child:bg-white child:dark:bg-zinc-700 child:shadow child:w-64 child:relative"
                        id="swiper-wrapper-608e5e1a7a4bf879"
                        aria-live="off"
                        style="transition-duration: 0ms; transform: translate3d(250px, 0px, 0px); transition-delay: 0ms;"
                    >
                        <div class="swiper-slide group swiper-slide-prev" role="group" aria-label="4 / 6" data-swiper-slide-index="3" style="width: 230px; margin-left: 20px;">
                            <span class="absolute top-5 right-5 flex items-center justify-center w-8 h-8 text-xs bg-green-500 rounded-full text-white z-30">20%</span>
                            <img src="{% static  'images/p4.png' %}" alt="product-1" class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                            <div class="px-2 lg:px-4 mb-3">
                                <a href="https://caffeine-demo.ir/product-details.html" class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">قهوه ترک بن مانو مقدار 250 گرم خط دوم اسم طولانی خط دوم طولانی</a>
                                <div class="flex items-center gap-x-1 lg:gap-x-3">
                                    <p class="font-DanaDemiBold text-green-600 dark:text-green-500">154,000 <span class="font-Dana text-sm">تومان</span></p>
                                    <del class="font-Dana text-xs lg:text-sm text-rose-300 hidden lg:inline">230,000 <span>تومان</span></del>
                                </div>
                            </div>
                            <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                                <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                    <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                        <svg class="w-4 h-4"><use href="#shopping-cart"></use></svg>
                                    </span>
                                    <span class="hover:text-green-600">
                                        <svg class="w-4 h-4"><use href="#heart"></use></svg>
                                    </span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                    <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide group swiper-slide-active" role="group" aria-label="5 / 6" data-swiper-slide-index="4" style="width: 230px; margin-left: 20px;">
                            <img src="{% static  'images/p3.png' %}" alt="product-1" class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                            <div class="px-2 lg:px-4 mb-3">
                                <a href="https://caffeine-demo.ir/product-details.html" class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">دانه قهوه اسپرسو کد 200 مقدار 100 گرم خط دوم طولانی</a>
                                <div class="flex items-center gap-x-1 lg:gap-x-3">
                                    <p class="font-DanaDemiBold text-green-600 dark:text-green-500">80,000 <span class="font-Dana text-sm">تومان</span></p>
                                </div>
                            </div>
                            <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                                <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                    <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                        <svg class="w-4 h-4"><use href="#shopping-cart"></use></svg>
                                    </span>
                                    <span class="hover:text-green-600">
                                        <svg class="w-4 h-4"><use href="#heart"></use></svg>
                                    </span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                    <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide group swiper-slide-next" role="group" aria-label="6 / 6" data-swiper-slide-index="5" style="width: 230px; margin-left: 20px;">
                            <img src="{% static  'images/p2.png' %}" alt="product-1" class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                            <div class="px-2 lg:px-4 mb-3">
                                <a href="https://caffeine-demo.ir/product-details.html" class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">قهوه ترک بن مانو مقدار 250 گرم خط دوم اسم طولانی خط دوم طولانی</a>
                                <div class="flex items-center gap-x-1 lg:gap-x-3"><p class="font-Dana text-red-400">فعلا موجود نیست</p></div>
                            </div>
                            <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                                <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                    <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                        <svg class="w-4 h-4"><use href="#shopping-cart"></use></svg>
                                    </span>
                                    <span class="hover:text-green-600">
                                        <svg class="w-4 h-4"><use href="#heart"></use></svg>
                                    </span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                    <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide group" role="group" aria-label="1 / 6" data-swiper-slide-index="0" style="width: 230px; margin-left: 20px;">
                            <span class="absolute top-5 right-5 flex items-center justify-center w-8 h-8 text-xs bg-green-500 rounded-full text-white z-30">20%</span>
                            <img src="{% static  'images/p7.png' %}" alt="product-1" class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                            <div class="px-2 lg:px-4 mb-3">
                                <a href="https://caffeine-demo.ir/product-details.html" class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">قهوه ترک گرمی مقدار 200 گرم رنگ بنفش خط دوم طولانی</a>
                                <div class="flex items-center gap-x-1 lg:gap-x-3">
                                    <p class="font-DanaDemiBold text-green-600 dark:text-green-500">200,000 <span class="font-Dana text-sm">تومان</span></p>
                                    <del class="font-Dana text-xs lg:text-sm text-rose-300 hidden lg:inline">230,000 <span class="">تومان</span></del>
                                </div>
                            </div>
                            <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                                <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                    <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                        <svg class="w-4 h-4"><use href="#shopping-cart"></use></svg>
                                    </span>
                                    <span class="hover:text-green-600">
                                        <svg class="w-4 h-4"><use href="#heart"></use></svg>
                                    </span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                    <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide group" role="group" aria-label="2 / 6" data-swiper-slide-index="1" style="width: 230px; margin-left: 20px;">
                            <img src="{% static  'images/p6.png' %}" alt="product-1" class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                            <div class="px-2 lg:px-4 mb-3">
                                <a href="https://caffeine-demo.ir/product-details.html" class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">پودر قهوه اسپرسو آرتیمان مقدار 250 گرم خط دوم طولانی</a>
                                <div class="flex items-center gap-x-1 lg:gap-x-3"><p class="font-Dana text-red-400">فعلا موجود نیست</p></div>
                            </div>
                            <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                                <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                    <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                        <svg class="w-4 h-4"><use href="#shopping-cart"></use></svg>
                                    </span>
                                    <span class="hover:text-green-600">
                                        <svg class="w-4 h-4"><use href="#heart"></use></svg>
                                    </span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                    <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                </div>
                            </div>
                        </div>
                        <div class="swiper-slide group" role="group" aria-label="3 / 6" data-swiper-slide-index="2" style="width: 230px; margin-left: 20px;">
                            <span class="absolute top-5 right-5 flex items-center justify-center w-8 h-8 text-xs bg-green-500 rounded-full text-white z-30">20%</span>
                            <img src="{% static  'images/p5.png' %}" alt="product-1" class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                            <div class="px-2 lg:px-4 mb-3">
                                <a href="https://caffeine-demo.ir/product-details.html" class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">قهوه ترک گرمی مقدار 200 گرم رنگ بنفش خط دوم طولانی</a>
                                <div class="flex items-center gap-x-1 lg:gap-x-3">
                                    <p class="font-DanaDemiBold text-green-600 dark:text-green-500">200,000 <span class="font-Dana text-sm">تومان</span></p>
                                    <del class="font-Dana text-xs lg:text-sm text-rose-300 hidden lg:inline">230,000 <span class="">تومان</span></del>
                                </div>
                            </div>
                            <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                                <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                    <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                        <svg class="w-4 h-4"><use href="#shopping-cart"></use></svg>
                                    </span>
                                    <span class="hover:text-green-600">
                                        <svg class="w-4 h-4"><use href="#heart"></use></svg>
                                    </span>
                                </div>
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                    <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg> <svg class="w-4 h-4 text-yellow-400"><use href="#star"></use></svg>
                                </div>
                            </div>
                        </div>
                    </div>
                    <span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
                </div>
            </section>
        </main>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const input = document.getElementById("customInput"),
                    incrementButton = document.querySelector(".increment"),
                    decrementButton = document.querySelector(".decrement");
                
                incrementButton?.addEventListener("click", () => {
                    if (input.value < 20) {
                        input.value = parseInt(input.value) + 1;
                        total_price = {{prod.price}}

                        document.getElementById('total-buying').textContent = total_price * input.value 
                    }
                });
                decrementButton?.addEventListener("click", () => {
                    if (input.value > 1) {
                        input.value = parseInt(input.value) - 1;
                        total_price = {{prod.price}}

                        document.getElementById('total-buying').textContent = total_price * input.value 
                    }
                });
            });
        </script>
   {%endblock%} 